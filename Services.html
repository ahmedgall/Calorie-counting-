<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø±ÙƒØ² Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø°ÙƒÙŠØ© | Calzy</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --p: #8b5cf6; --bg: #05070a; --card: #111827; --text: #f9fafb; --s: #10b981;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Cairo', sans-serif; }
        body { background: var(--bg); color: var(--text); padding: 20px; min-height: 100vh; padding-bottom: 50px; }

        /* Ø²Ø± Ø§Ù„Ø±Ø¬ÙˆØ¹ */
        .btn-back { 
            background: var(--card); border: 1px solid rgba(255,255,255,0.1); 
            color: white; padding: 10px 20px; border-radius: 15px; cursor: pointer; 
            text-decoration: none; display: inline-flex; align-items: center; gap: 8px;
            font-weight: bold; margin-bottom: 20px;
        }

        /* Ø­Ù‚Ù„ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…Ø¶ÙŠØ¡ */
        .search-box {
            width: 100%; padding: 18px; background: #0f172a; border: 2px solid #1e293b;
            border-radius: 20px; color: white; outline: none; margin-bottom: 30px;
            transition: 0.4s;
        }
        .search-box:focus {
            border-color: var(--p);
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.5);
        }

        /* Ø´Ø¨ÙƒØ© Ø§Ù„Ø®Ø¯Ù…Ø§Øª */
        .services-grid { 
            display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); 
            gap: 15px; 
        }
        .s-card {
            background: var(--card); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 20px; padding: 20px; text-align: center; cursor: pointer;
            transition: 0.3s;
        }
        .s-card:hover { border-color: var(--p); transform: translateY(-5px); background: #1e293b; }
        .s-icon { font-size: 30px; margin-bottom: 10px; display: block; }

        /* Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© (Modal) */
        .modal {
            position: fixed; inset: 0; background: rgba(0,0,0,0.9);
            display: none; align-items: center; justify-content: center; z-index: 2000;
            padding: 20px;
        }
        .modal-content {
            background: var(--card); width: 100%; max-width: 400px;
            padding: 25px; border-radius: 25px; border: 1px solid var(--p);
            position: relative;
        }
        .close-modal { position: absolute; top: 15px; left: 15px; cursor: pointer; color: #6b7280; }
        
        input, select {
            width: 100%; padding: 12px; background: #1f2937; border: 1px solid #374151;
            border-radius: 12px; color: white; margin: 10px 0; outline: none;
        }
        .calc-btn {
            width: 100%; padding: 15px; background: var(--p); border: none;
            border-radius: 12px; color: white; font-weight: 900; cursor: pointer;
        }
        .result-area {
            margin-top: 15px; padding: 15px; background: rgba(16, 185, 129, 0.1);
            border: 1px dashed var(--s); border-radius: 15px; display: none; text-align: center;
        }
    </style>
</head>
<body>

    <a href="index.html" class="btn-back">
        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="2" d="M19 12H5m7 7l-7-7 7-7"></path></svg>
        Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
    </a>

    <input type="text" id="searchInput" class="search-box" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø®Ø¯Ù…ØªÙƒ..." onkeyup="filterCards()">

    <div class="services-grid" id="grid"></div>

    <div id="calcModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">âœ•</span>
            <h3 id="mTitle" style="color:var(--p); margin-bottom:15px;"></h3>
            <div id="mInputs"></div>
            <button class="calc-btn" onclick="runCalculation()">Ø§Ø­Ø³Ø¨ Ø§Ù„Ø¢Ù† âœ…</button>
            <div id="mResult" class="result-area"></div>
        </div>
    </div>

    <script>
        const services = [
            { id: 'bf', n: "Ù†Ø³Ø¨Ø© Ø§Ù„Ø¯Ù‡ÙˆÙ†", i: "âš–ï¸", d: "Ø­Ø³Ø¨ Ù‚ÙŠØ§Ø³Ø§Øª Ø§Ù„Ø¬Ø³Ù…", inputs: ['height|Ø§Ù„Ø·ÙˆÙ„ (Ø³Ù…)', 'waist|Ø§Ù„Ø®ØµØ± (Ø³Ù…)', 'neck|Ø§Ù„Ø±Ù‚Ø¨Ø© (Ø³Ù…)'] },
            { id: 'rm', n: "Ø£Ù‚ØµÙ‰ ÙˆØ²Ù† 1RM", i: "ğŸ‹ï¸", d: "Ù‚ÙŠØ§Ø³ Ù‚ÙˆØªÙƒ Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©", inputs: ['weight|Ø§Ù„ÙˆØ²Ù† Ø§Ù„Ù…Ø±ÙÙˆØ¹', 'reps|Ø§Ù„Ø¹Ø¯Ø§Øª'] },
            { id: 'water', n: "Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ù…Ø§Ø¡", i: "ğŸ’§", d: "Ø§Ø­ØªÙŠØ§Ø¬Ùƒ Ø§Ù„ÙŠÙˆÙ…ÙŠ", inputs: ['uWeight|ÙˆØ²Ù†Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ'] },
            { id: 'creatine', n: "Ø¬Ø±Ø¹Ø© Ø§Ù„ÙƒØ±ÙŠØ§ØªÙŠÙ†", i: "ğŸ’Š", d: "Ø­Ø³Ø¨ ÙˆØ²Ù† Ø§Ù„Ø¬Ø³Ù…", inputs: ['uWeight|ÙˆØ²Ù†Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ'] },
            { id: 'bmi', n: "Ù…Ø¤Ø´Ø± Ø§Ù„ÙƒØªÙ„Ø© BMI", i: "ğŸ“", d: "ØªÙ†Ø§Ø³Ù‚ Ø§Ù„ÙˆØ²Ù† ÙˆØ§Ù„Ø·ÙˆÙ„", inputs: ['uWeight|Ø§Ù„ÙˆØ²Ù†', 'height|Ø§Ù„Ø·ÙˆÙ„ (Ø³Ù…)'] },
            { id: 'protein', n: "Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø¨Ø±ÙˆØªÙŠÙ†", i: "ğŸ¥©", d: "Ù„Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø¹Ø¶Ù„Ø§Øª", inputs: ['uWeight|Ø§Ù„ÙˆØ²Ù†'] },
            { id: 'steps', n: "Ø­Ø±Ù‚ Ø§Ù„Ù…Ø´ÙŠ", i: "ğŸš¶", d: "Ø­Ø±Ù‚ Ø§Ù„Ø³Ø¹Ø±Ø§Øª Ø¨Ø§Ù„Ø®Ø·ÙˆØ§Øª", inputs: ['steps|Ø¹Ø¯Ø¯ Ø§Ù„Ø®Ø·ÙˆØ§Øª'] },
            // ... (Ø¨Ù‚ÙŠØ© Ø§Ù„Ù€ 50 Ø®Ø¯Ù…Ø© ØªØ¶Ø§Ù Ù‡Ù†Ø§ Ø¨Ù†ÙØ³ Ø§Ù„Ù†Ù…Ø·)
        ];

        let currentActiveId = '';

        function render() {
            const grid = document.getElementById('grid');
            grid.innerHTML = services.map(s => `
                <div class="s-card" onclick="openModal('${s.id}')">
                    <span class="s-icon">${s.i}</span>
                    <b>${s.n}</b>
                    <small>${s.d}</small>
                </div>
            `).join('');
        }

        function openModal(id) {
            const s = services.find(x => x.id === id);
            currentActiveId = id;
            document.getElementById('mTitle').innerText = s.n;
            document.getElementById('mInputs').innerHTML = s.inputs.map(inp => {
                const [idName, placeholder] = inp.split('|');
                return `<input type="number" id="val_${idName}" placeholder="${placeholder}">`;
            }).join('');
            document.getElementById('mResult').style.display = 'none';
            document.getElementById('calcModal').style.display = 'flex';
        }

        function closeModal() { document.getElementById('calcModal').style.display = 'none'; }

        function runCalculation() {
            let res = "";
            const getVal = (id) => parseFloat(document.getElementById('val_' + id).value) || 0;

            if (currentActiveId === 'bf') {
                const h = getVal('height'), w = getVal('waist'), n = getVal('neck');
                res = (495 / (1.0324 - 0.19077 * Math.log10(w - n) + 0.15456 * Math.log10(h)) - 450).toFixed(1) + "% Ù†Ø³Ø¨Ø© Ø¯Ù‡ÙˆÙ†Ùƒ";
            } else if (currentActiveId === 'rm') {
                res = Math.round(getVal('weight') * (1 + getVal('reps') / 30)) + " ÙƒØ¬Ù… Ù‡Ùˆ Ø£Ù‚ØµÙ‰ ÙˆØ²Ù†";
            } else if (currentActiveId === 'water') {
                res = (getVal('uWeight') * 0.035).toFixed(1) + " Ù„ØªØ± ÙŠÙˆÙ…ÙŠØ§Ù‹";
            } else if (currentActiveId === 'creatine') {
                res = (getVal('uWeight') * 0.05).toFixed(1) + " Ø¬Ø±Ø§Ù… ÙŠÙˆÙ…ÙŠØ§Ù‹";
            } else if (currentActiveId === 'bmi') {
                const h = getVal('height')/100;
                res = (getVal('uWeight') / (h*h)).toFixed(1) + " BMI";
            } else if (currentActiveId === 'protein') {
                res = (getVal('uWeight') * 2.2).toFixed(0) + " Ø¬Ø±Ø§Ù… Ø¨Ø±ÙˆØªÙŠÙ† ÙƒÙ‡Ø¯Ù Ù…Ø«Ø§Ù„ÙŠ";
            } else if (currentActiveId === 'steps') {
                res = (getVal('steps') * 0.04).toFixed(0) + " Ø³Ø¹Ø± Ø­Ø±Ø§Ø±ÙŠ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹";
            }

            const rBox = document.getElementById('mResult');
            rBox.innerHTML = `<b>Ø§Ù„Ù†ØªÙŠØ¬Ø©: ${res}</b>`;
            rBox.style.display = 'block';
        }

        function filterCards() {
            const q = document.getElementById('searchInput').value.toLowerCase();
            const cards = document.querySelectorAll('.s-card');
            cards.forEach(c => {
                const text = c.innerText.toLowerCase();
                c.style.display = text.includes(q) ? 'block' : 'none';
            });
        }

        window.onload = render;
    </script>
</body>
</html>
